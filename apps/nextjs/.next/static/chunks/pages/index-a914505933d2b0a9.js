(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7314:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3826)}])},3826:function(e,t,n){"use strict";n.r(t);var l=n(2322),s=n(2784),i=n(7729),a=n.n(i),r=n(3848),o=n(5778);function d(e){return(0,l.jsxs)("div",{className:"flex flex-row rounded-lg bg-white/10 p-4 transition-all hover:scale-[101%]",children:[(0,l.jsxs)("div",{className:"flex-grow",children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-pink-400",children:e.post.title}),(0,l.jsx)("p",{className:"mt-2 text-sm",children:e.post.content})]}),(0,l.jsx)("div",{children:(0,l.jsx)("span",{className:"cursor-pointer text-sm font-bold uppercase text-pink-400",onClick:e.onPostDelete,children:"Delete"})})]})}function c(){var e,t,n,i;let a=o.h.useContext(),[r,d]=(0,s.useState)(""),[c,x]=(0,s.useState)(""),{mutate:u,error:h}=o.h.post.create.useMutation({async onSuccess(){d(""),x(""),await a.post.all.invalidate()}});return(0,l.jsxs)("div",{className:"flex w-full max-w-2xl flex-col p-4",children:[(0,l.jsx)("input",{className:"mb-2 rounded bg-white/10 p-2 text-white",value:r,onChange:e=>d(e.target.value),placeholder:"Title"}),(null==h?void 0:null===(e=h.data)||void 0===e?void 0:null===(t=e.zodError)||void 0===t?void 0:t.fieldErrors.title)&&(0,l.jsx)("span",{className:"mb-2 text-red-500",children:h.data.zodError.fieldErrors.title}),(0,l.jsx)("input",{className:"mb-2 rounded bg-white/10 p-2 text-white",value:c,onChange:e=>x(e.target.value),placeholder:"Content"}),(null==h?void 0:null===(n=h.data)||void 0===n?void 0:null===(i=n.zodError)||void 0===i?void 0:i.fieldErrors.content)&&(0,l.jsx)("span",{className:"mb-2 text-red-500",children:h.data.zodError.fieldErrors.content}),(0,l.jsx)("button",{className:"rounded bg-pink-400 p-2 font-bold",onClick:()=>{u({title:r,content:c})},children:"Create"})]})}function x(){var e;let{data:t}=o.h.auth.getSession.useQuery(),{data:n}=o.h.auth.getSecretMessage.useQuery(void 0,{enabled:!!(null==t?void 0:t.user)});return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4",children:[(null==t?void 0:t.user)&&(0,l.jsxs)("p",{className:"text-center text-2xl text-white",children:[t&&(0,l.jsxs)("span",{children:["Logged in as ",null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.name]}),n&&(0,l.jsxs)("span",{children:[" - ",n]})]}),(0,l.jsx)("button",{className:"rounded-full bg-white/10 px-10 py-3 font-semibold text-white no-underline transition hover:bg-white/20",onClick:t?()=>void(0,r.signOut)():()=>void(0,r.signIn)(),children:t?"Sign out":"Sign in"})]})}t.default=()=>{var e,t;let n=o.h.post.all.useQuery(),s=o.h.post.delete.useMutation({onSettled:()=>n.refetch()});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(a(),{children:[(0,l.jsx)("title",{children:"Create T3 App"}),(0,l.jsx)("meta",{name:"description",content:"Generated by create-t3-app"}),(0,l.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,l.jsx)("main",{className:"flex h-screen flex-col items-center bg-gradient-to-b from-[#2e026d] to-[#15162c] text-white",children:(0,l.jsxs)("div",{className:"container mt-12 flex flex-col items-center justify-center gap-4 px-4 py-8",children:[(0,l.jsxs)("h1",{className:"text-5xl font-extrabold tracking-tight sm:text-[5rem]",children:["Create ",(0,l.jsx)("span",{className:"text-pink-400",children:"T3"})," Turbo"]}),(0,l.jsx)(x,{}),(0,l.jsx)(c,{}),n.data?(0,l.jsx)("div",{className:"w-full max-w-2xl",children:(null===(e=n.data)||void 0===e?void 0:e.length)===0?(0,l.jsx)("span",{children:"There are no posts!"}):(0,l.jsx)("div",{className:"flex h-[40vh] justify-center overflow-y-scroll px-4 text-2xl",children:(0,l.jsx)("div",{className:"flex w-full flex-col gap-4",children:null===(t=n.data)||void 0===t?void 0:t.map(e=>(0,l.jsx)(d,{post:e,onPostDelete:()=>s.mutate(e.id)},e.id))})})}):(0,l.jsx)("p",{children:"Loading..."})]})})]})}},7729:function(e,t,n){e.exports=n(501)}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7314)}),_N_E=e.O()}]);